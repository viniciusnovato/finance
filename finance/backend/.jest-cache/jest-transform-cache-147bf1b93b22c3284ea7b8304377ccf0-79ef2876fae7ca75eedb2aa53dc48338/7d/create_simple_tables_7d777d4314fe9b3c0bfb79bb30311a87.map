{"version":3,"names":["cov_1s8xf7hnk6","actualCoverage","s","require","config","createClient","supabase","process","env","SUPABASE_URL","SUPABASE_SERVICE_ROLE_KEY","createSimpleTables","f","console","log","queries","i","length","error","rpc","sql","b","message","err"],"sources":["create_simple_tables.js"],"sourcesContent":["require('dotenv').config();\nconst { createClient } = require('@supabase/supabase-js');\n\nconst supabase = createClient(\n  process.env.SUPABASE_URL,\n  process.env.SUPABASE_SERVICE_ROLE_KEY\n);\n\nasync function createSimpleTables() {\n  console.log('üèóÔ∏è  Criando tabelas simplificadas...');\n  \n  const queries = [\n    // Criar tabela de empresas simples\n    `CREATE TABLE IF NOT EXISTS companies (\n      id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n      name VARCHAR(255) NOT NULL,\n      document VARCHAR(20) NOT NULL UNIQUE,\n      document_type VARCHAR(10) NOT NULL DEFAULT 'CNPJ',\n      email VARCHAR(255),\n      phone VARCHAR(20),\n      created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n    );`,\n    \n    // Criar tabela de filiais simples\n    `CREATE TABLE IF NOT EXISTS branches (\n      id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n      company_id UUID NOT NULL REFERENCES companies(id) ON DELETE CASCADE,\n      name VARCHAR(255) NOT NULL,\n      address TEXT,\n      city VARCHAR(100),\n      state VARCHAR(2),\n      zip_code VARCHAR(10),\n      created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n    );`,\n    \n    // Inserir empresa padr√£o\n    `INSERT INTO companies (id, name, document, email, phone) \n     VALUES ('00000000-0000-0000-0000-000000000001', 'Empresa Padr√£o', '00000000000100', 'contato@empresa.com', '(11) 99999-9999')\n     ON CONFLICT (id) DO NOTHING;`,\n    \n    // Inserir filial padr√£o\n    `INSERT INTO branches (id, company_id, name, address, city, state, zip_code) \n     VALUES ('00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', 'Filial Principal', 'Endere√ßo Principal', 'S√£o Paulo', 'SP', '01000-000')\n     ON CONFLICT (id) DO NOTHING;`\n  ];\n  \n  for (let i = 0; i < queries.length; i++) {\n    try {\n      const { error } = await supabase.rpc('exec_sql', { sql: queries[i] });\n      if (error) {\n        console.error(`‚ùå Erro no comando ${i + 1}:`, error.message);\n      } else {\n        console.log(`‚úÖ Comando ${i + 1} executado com sucesso`);\n      }\n    } catch (err) {\n      console.error(`‚ùå Erro no comando ${i + 1}:`, err.message);\n    }\n  }\n  \n  console.log('üéâ Tabelas criadas!');\n}\n\ncreateSimpleTables();"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAeY;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAAAA,cAAA,GAAAE,CAAA;AAfZC,OAAO,CAAC,QAAQ,CAAC,CAACC,MAAM,CAAC,CAAC;AAC1B,MAAM;EAAEC;AAAa,CAAC;AAAA;AAAA,CAAAL,cAAA,GAAAE,CAAA,OAAGC,OAAO,CAAC,uBAAuB,CAAC;AAEzD,MAAMG,QAAQ;AAAA;AAAA,CAAAN,cAAA,GAAAE,CAAA,OAAGG,YAAY,CAC3BE,OAAO,CAACC,GAAG,CAACC,YAAY,EACxBF,OAAO,CAACC,GAAG,CAACE,yBACd,CAAC;AAED,eAAeC,kBAAkBA,CAAA,EAAG;EAAA;EAAAX,cAAA,GAAAY,CAAA;EAAAZ,cAAA,GAAAE,CAAA;EAClCW,OAAO,CAACC,GAAG,CAAC,uCAAuC,CAAC;EAEpD,MAAMC,OAAO;EAAA;EAAA,CAAAf,cAAA,GAAAE,CAAA,OAAG;EACd;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;EAEH;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;EAEH;EACA;AACJ;AACA,kCAAkC;EAE9B;EACA;AACJ;AACA,kCAAkC,CAC/B;EAAC;EAAAF,cAAA,GAAAE,CAAA;EAEF,KAAK,IAAIc,CAAC;EAAA;EAAA,CAAAhB,cAAA,GAAAE,CAAA,OAAG,CAAC,GAAEc,CAAC,GAAGD,OAAO,CAACE,MAAM,EAAED,CAAC,EAAE,EAAE;IAAA;IAAAhB,cAAA,GAAAE,CAAA;IACvC,IAAI;MACF,MAAM;QAAEgB;MAAM,CAAC;MAAA;MAAA,CAAAlB,cAAA,GAAAE,CAAA,OAAG,MAAMI,QAAQ,CAACa,GAAG,CAAC,UAAU,EAAE;QAAEC,GAAG,EAAEL,OAAO,CAACC,CAAC;MAAE,CAAC,CAAC;MAAC;MAAAhB,cAAA,GAAAE,CAAA;MACtE,IAAIgB,KAAK,EAAE;QAAA;QAAAlB,cAAA,GAAAqB,CAAA;QAAArB,cAAA,GAAAE,CAAA;QACTW,OAAO,CAACK,KAAK,CAAC,qBAAqBF,CAAC,GAAG,CAAC,GAAG,EAAEE,KAAK,CAACI,OAAO,CAAC;MAC7D,CAAC,MAAM;QAAA;QAAAtB,cAAA,GAAAqB,CAAA;QAAArB,cAAA,GAAAE,CAAA;QACLW,OAAO,CAACC,GAAG,CAAC,aAAaE,CAAC,GAAG,CAAC,wBAAwB,CAAC;MACzD;IACF,CAAC,CAAC,OAAOO,GAAG,EAAE;MAAA;MAAAvB,cAAA,GAAAE,CAAA;MACZW,OAAO,CAACK,KAAK,CAAC,qBAAqBF,CAAC,GAAG,CAAC,GAAG,EAAEO,GAAG,CAACD,OAAO,CAAC;IAC3D;EACF;EAAC;EAAAtB,cAAA,GAAAE,CAAA;EAEDW,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC;AACpC;AAAC;AAAAd,cAAA,GAAAE,CAAA;AAEDS,kBAAkB,CAAC,CAAC","ignoreList":[]}